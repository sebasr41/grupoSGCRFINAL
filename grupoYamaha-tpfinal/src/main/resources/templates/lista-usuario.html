<!DOCTYPE html>
<html lang="es" xmlns:th="https://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link th:rel="stylesheet" th:href="@{https://use.fontawesome.com/releases/v5.15.3/css/all.css}"
		integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
	<link th:rel="stylesheet" th:href="@{css/styles.css}">
	<link th:rel="stylesheet" th:href="@{webjars/bootstrap/4.6.0/css/bootstrap.min.css}">
	<link rel="shortcut icon" href="img/favicon.png" />
	<title>Lista de clientes</title>
</head>

<body class="body-gam">
	<!--   HEADER    -->
	<div th:replace="layouts/header :: header"></div>

	<!--   NAV WITH TABS    -->
	<div th:replace="layouts/nav-tabs :: div"></div>
	
	<div class="alert alert-warning alert-dismissable" th:if="${warning != null}">
			<label th:text="${warning}"></label>
			<button type="button" class="close" data-dismiss="alert">&times;</button>
		</div>
	
	<div class="alert alert-success alert-dismissable" th:if="${success != null}">
			<label th:text="${success}"></label>
			<button type="button" class="close" data-dismiss="alert">&times;</button>
		</div>

	<div class="container mb-5">
		<div class="show-case-2">
			<h1 class="text-center text-light text-uppercase pt-5 font-weight-bold">Lista de usuarios registrados</h1>
		</div>
	</div>
	<div class="col-md-12 d-block m-auto rounded mt-5">
		<table class="table table-striped table-responsive-xl bg-pv--form text-light" >
			<thead>
				<tr>
					<th>Número de cuenta</th>
					<th>Dirección 1</th>
					<th>Dirección 2</th>
					<th>Ciudad </th>
					<th>Nombre de contacto </th>
					<th>Apellido de contacto</th>
					<th>Estado</th>					
					<th>Límite de credito</th>
					<th>Nombre de cliente</th>
					<th>Teléfono </th>
					<th>Código Postal </th>
					<th>País </th>					
					<th>Número de empleado</th>
					<th>Editar</th>
					<th>Eliminar</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="cus : ${customers}">
					<td th:text="${cus.customerNumber}"></td>
					<td th:text="${cus.addressLine1}"></td>
					<td th:text="${cus.addressLine1}"></td>
					<td th:text="${cus.city}"></td>
					<td th:text="${cus.contactFirstName}"></td>
					<td th:text="${cus.contactLastName}"></td>
					<td th:text="${cus.state}"></td>
					<td th:text="${cus.creditLimit}"></td>
					<td th:text="${cus.customerName}"></td>
					<td th:text="${cus.phone}"></td>
					<td th:text="${cus.postalCode}"></td>
					<td th:text="${cus.coutry}"></td>					
					<td th:text="${cus.employees.employeeNumber}"></td>
					<td>
					<a th:href="@{/customer-editar-} + ${cus.customerNumber}" class="btn btn-warning px-4"><i class="fas fa-edit text-light"></i></a>
					</td>
					<td>

							<!--Button trigger modal -->
							<button type="button" class="btn btn-danger px-4" data-toggle="modal"
								data-target="#myModal" th:attrappend="data-target='del'+${cus.customerNumber}">
								<i class="fas fa-trash-alt text-light"></i>
							</button>
							<!-- Modal -->
							<div class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel"
								aria-hidden="true" th:attrappend="id='del'+${cus.customerNumber}" id="myModal">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header body-gam">
											<h5 class="modal-title" id="exampleModalLabel" th:text="'Advertencia'"></h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true" class="text-light">&times;</span>
											</button>
										</div>
										<div class="modal-body bg-pv--form">
											<p th:text="'¿Seguro que desea eliminar el registro?'"></p>
										</div>
										<div class="modal-footer body-gam">
											<button type="button" class="btn btn-secondary"
												data-dismiss="modal">Cancelar</button>
											<a class="btn btn-primary"
												th:href="@{/customer-eliminar-} + ${cus.customerNumber}"
												th:text="'Eliminar'" title="Eliminar registro"></a>
										</div>
									</div>
								</div>
							</div>

						</td>
				</tr>
			</tbody>
		</table>
	</div>


	<script th:src="@{webjars/jquery/3.5.1/jquery.min.js}"></script>
	<script th:src="@{webjars/popper.js/1.16.1-lts/popper.min.js}"></script>
	<script th:src="@{webjars/bootstrap/4.6.0/js/bootstrap.min.js}"></script>
</body>

</html>